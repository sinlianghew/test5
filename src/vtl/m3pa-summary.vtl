<script>
    $(function() { 
        window.killUnloadM3PA = function () {
            jQuery(window).off('beforeunload') 
        } 
    })
</script>

#[[

<main class="travel-insurance-new" id="main-content">
        

    <div id="motorcycle-form" class="form-wizard">
        <!-- The base URL for all the API calls -->
        <input type="hidden" name="tieBaseUrl" value="">

        <!-- Depending on the stage of the subscription journey, the form will behave differently. -->
        <input type="hidden" name="stage" value="summary">

        <!-- Default Values -->
        <input type="hidden" name="formula" value="motor">
        <input type="hidden" name="partnerCode" value="msigonline">
        <input type="hidden" name="productCode" value="MCY">
        <input type="hidden" name="productName" value="Motorcycle">
        <input type="hidden" name="staffId" value="">
        <input type="hidden" name="staffRelationship" value="">
        <input type="hidden" name="branchCode" value="">
        <input type="hidden" name="supportTel" value="1-800-88-6744">
        <input type="hidden" name="thankYouPageUrl" value="/payment-completed.html">
        <input type="hidden" name="paymentUrl" value="/msigonline/products/motorcycle/payment.html">

        <div class="container py-5" v-if="canProceed">
            <h1>Motorcycle Insurance</h1>
            <!-- Steppers -->
            <div class="nav variant-steppers">
                <div :class="{
                    'nav-item step': true,
                    'current': currStep == step,
                    'completed': step.completed
                }" v-for="step in steps" v-bind:key="steps.indexOf(step)">
                    <div class="step-indicator">
                        <span>
                            {{ step.stepNum }}
                        </span>
                        <svg class="icon icon-s tick-mark">
                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark" href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                        </svg>
                    </div>
                    <div class="step-title">{{ step.title }}</div>
                </div>
            </div>
            <!-- Steppers -->
        </div>

        <div class="bg-p2d py-5 wizard-sections position-relative" v-if="canProceed">
            <validation-observer v-slot="observer" ref="form">
                <form @submit.prevent="observer.handleSubmit(onSubmit)">
                    <fieldset class="wizard-section-1" v-if="currStep && currStep.stepNum === '1'">
                        <div class="container">
                            <div class="bg-w py-5 px-md-5 px-3 mx-md-2">
                                <h2 class="p2">Get Started</h2>

                                <div class="bt2 mt-4" v-if="steps[0].showPrescreen">
                                    <p>
                                        Please make sure you meet the following conditions.
                                    </p>
                                    <ol class="pl-3">
                                        <li>You are between 16 and 75 years old.</li>
                                        <li>Your Motorcycle is 250 c.c and below.</li>
                                        <li>Your Motorcycle sum insured does not exceed RM30,000.</li>
                                        <li>Your Motorcycle is not older than 15 years old (comprehensive) or 40 years old (3PA).
                                        </li>
                                        <li>Your next policy renewal date is within 60 days.</li>
                                    </ol>
                                </div>

                                <div class="row mt-4 pt-2" v-if="!steps[0].showPrescreen">
                                    <div class="col-md-4 col-12">
                                        <div class="d-flex mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" 
                                                    type="radio"
                                                    name="id_type"
                                                    value="nric"
                                                    id="id_type1"
                                                    v-model="formData['1'].policyHolderIdType">
                                                <label class="form-check-label" for="id_type1">NRIC</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input"
                                                    type="radio"
                                                    name="id_type"
                                                    value="passport"
                                                    id="id_type2"
                                                    v-model="formData['1'].policyHolderIdType">
                                                <label class="form-check-label" for="id_type2">Passport</label>
                                            </div>
                                        </div>

                                        <div class="d-flex flex-column">
                                            <validation-provider v-slot="validator" :rules="{ required: !isIdNric }">
                                                <div class="form-group" v-if="!isIdNric">
                                                    <select :class="{
                                                        'form-control': true,
                                                        'is-invalid': validator.errors.length > 0
                                                    }" v-model="formData['1'].country">
                                                        <option disabled hidden selected value="">Select a country</option>
                                                        <option v-for="country in countries"
                                                            v-bind:key="countries.indexOf(country)"
                                                            :value="country.code">
                                                            {{ country.name }}
                                                        </option>
                                                    </select>
                                                    <div class="invalid-feedback">
                                                        <small class="error-message text-primary font-italic">
                                                            * Complete the country field.
                                                        </small>
                                                    </div>
                                                </div>
                                            </validation-provider>
                                            <validation-provider v-slot="validator"
                                                :rules="{
                                                    'required': true,
                                                    'nricValidDob': isIdNric,
                                                    'nricAge18AndAbove': isIdNric,
                                                    'min': isIdNric && {
                                                        length: 14
                                                    }
                                                }">
                                                <div class="form-group">
                                                    <input type="text"
                                                        :class="{
                                                            'form-control': true,
                                                            'is-invalid': validator.errors.length > 0
                                                        }"
                                                        :name="isIdNric ? 'NRIC' : 'Passport'"
                                                        :placeholder="isIdNric ? 'E.g. 900808-10-8888' : 'E.g. A98765432'"
                                                        v-mask="isIdNric ? '######-##-####' : 'XXXXXXXXXXXXXX'"
                                                        v-model="formData['1'].policyHolderNric"
                                                        autocomplete="off">
                                                    <div class="invalid-feedback font-italic">
                                                        <span v-if="validator.failedRules.required">* Complete the {{ isIdNric ? 'NRIC' : 'Passport' }} field.</span>
                                                        <span v-else-if="validator.failedRules.nricValidDob || validator.failedRules.min">Please check NRIC number</span>
                                                        <span v-else-if="validator.failedRules.nricAge18AndAbove">Min age for main policyholder is 18.</span>
                                                    </div>
                                                </div>
                                            </validation-provider>
                                            
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-12">
                                        <!-- Don't change this value as this is for their CMS -->
                                        <p class="bt1 mt-1" style="margin-bottom: .825rem">Motorcycle Registration No.:</p>
                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <validation-provider v-slot="validator" rules="required">
                                                    <div class="form-group">
                                                        <input type="text"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            placeholder="E.g. WA888A"
                                                            name='Vehicle Registration No.'
                                                            v-model="formData['1'].motorRegistrationNo">
                                                        <div class="invalid-feedback">
                                                            {{ validator.errors[0] }}
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bt2 mt-4 pt-2" v-if="!steps[0].showPrescreen">
                                    <validation-provider v-slot="validator" rules="mustBeTrue">
                                        <div class="form-check">
                                            <input type="checkbox"
                                                name="agreement"
                                                id="agreement"
                                                :class="{
                                                    'form-check-input': true,
                                                    'is-invalid': validator.errors.length > 0
                                                }"
                                                v-model="formData['1'].agreement">
                                            <label for="agreement" class="form-check-label">
                                                I have read and understood MSIG's <a href="https://www.msig.com.my/privacy-notice/" class="underline">Privacy Notice</a> and
                                                agree to MSIG
                                                processing my personal data for the purposes and in the manners set out in the Privacy
                                                Notice.
                                            </label>
                                            <svg class="icon icon-m tick-mark">
                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                            </svg>
                                            <div class="invalid-feedback font-italic" v-if="validator.errors.length > 0">
                                                * Oops, looks like you haven't ticked the box yet. Please do so to proceed
                                            </div>
                                        </div>
                                    </validation-provider>
                                </div>
                            </div>
                        </div>
                        <div class="container pt-4 wizard-navigation d-flex flex-column flex-md-row">
                            <a class="btn btn-default btn-outline-primary order-1 order-md-0"
                                v-if="steps[0].showPrescreen">No</a>
                            <a href="#" 
                                role="button"
                                class="btn btn-default btn-primary mb-3 mb-md-0"
                                v-if="steps[0].showPrescreen"
                                @click.prevent="setPrescreen(false)">
                                Yes</a>
                            <a class="btn btn-default btn-outline-primary order-1 order-md-0" 
                                @click.prevent="setPrescreen(true)"
                                v-if="!steps[0].showPrescreen">Back</a>
                            <a href="#"
                                @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })"
                                class="btn btn-default btn-primary mb-3 mb-md-0" 
                                v-if="!steps[0].showPrescreen">
                                Continue
                            </a>
                        </div>
                    </fieldset>
                    
                    <fieldset class="wizard-section-2" v-if="currStep && currStep.stepNum === '2'">
                        <div class="container">
                            <div class="row">
                                <div class="col-12 col-md-8">
                                    <div class="bg-w py-5 px-4 mb-4">
                                        <div class="d-flex">
                                            <h2 class="p2 mb-4">Motorcycle Details</h2>
                                        </div>

                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Motorcycle Make:</label>
                                                    <input disabled type="text" v-model="formData['2'].make" class="form-control">
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Motorcycle Model:</label>
                                                    <input type="text" disabled :value="formData['2'].family" class="form-control">
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Year of Make:</label>
                                                    <input type="text" disabled v-model="formData['2'].motorYearOfMake" class="form-control">
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Variant:</label>
                                                        <select :class="{ 'form-control': true, 'is-invalid': validator.errors.length > 0 }" v-model="formData['2'].motorModel" @change="handleMotorModelChanged">
                                                            <option v-for="model in allModelVariants" :value="model">
                                                                {{ model.variant }} {{ model.style }} {{ model.engine }} {{ model.seat }} SEAT {{ model.transmission }}
                                                            </option>
                                                        </select>
                                                        <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                            * Complete the Motorcycle Location field.
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-2">Motorcycle Location:</p>
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <select :class="{ 'form-control': true, 'is-invalid': validator.errors.length > 0 }" 
                                                            @change="findVehicleSumInsured"
                                                            v-model="formData['2'].motorVehicleLocation">
                                                            <option disabled hidden selected value="">Select a state</option>
                                                            <option v-for="state in states" :key="state.code" :value="state">{{ state.name }}</option>
                                                        </select>
                                                        <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                            * Complete the Motorcycle Location field.
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Sum Insured Value:</label>
                                                    <select class="form-control" 
                                                        v-model="formData['2'].sumInsuredType"
                                                        :disabled="partnerCode === 'msigonline'">
                                                        <option value="marketValue">Market Value</option>
                                                        <option value="recomendedValue">Recommended Value</option> 
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Cubic Capacity:</label>
                                                    <select class="form-control" 
                                                        v-model="formData['2'].motorCc"
                                                        @change="handleCcChanged">
                                                        <option v-for="ccVariant in allCcVariants" 
                                                            v-bind:key="allCcVariants.indexOf(ccVariant)" 
                                                            :value="ccVariant">
                                                            {{ ccVariant }}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>


                                            <div class="col-12 col-md-6">
                                                
                                                <div class="form-group variant-icon variant-autocomplete">
                                                    <label class="bt1">Loan Provider (Optional):</label>
                                                
                                                    <vue-typeahead-bootstrap
                                                        :data="loanProviderSuggestions"
                                                        v-model="formData['2'].motorLoanProvider"
                                                        :serializer="function(s) { return s.financeName }"
                                                        placeholder="Find Loan Provider"
                                                        :max-matches="5"
                                                        @hit="formData['2'].motorLoanProvider = $event.financeName"
                                                    >
                                                        <template slot="append">
                                                            <svg class="icon icon-s mr-2">
                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-search"
                                                                    href="/spa-assets/icons/icons.svg#sprite-search"></use>
                                                            </svg>
                                                        </template>
                                                    </vue-typeahead-bootstrap>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-w py-5 px-4 mb-4">
                                        <div class="d-flex">
                                            <h2 class="p2 mb-4">Rider Details</h2>
                                        </div>

                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required|validName" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Name (as per NRIC):</label>
                                                        <input type="text"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-model="formData['2'].policyHolderName"
                                                            placeholder="E.g. Lee Siew Suan">
                                                        <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">* Complete the Name as per NRIC field.</span>
                                                            <span v-else-if="validator.failedRules.validName">Please enter only alphabet, "-", "@", "/" and " ' " for Name</span>
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">NRIC No.:</label>
                                                        <input type="text" 
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-model="formData['1'].policyHolderNric"
                                                            placeholder="E.g. 900808-10-8888"
                                                            disabled
                                                            v-mask="'######-##-####'">
                                                        <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                            * Complete the NRIC field.
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required|email" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1 d-flex">
                                                            Email: 
                                                            <span>
                                                                <div class="ml-2 btn-tooltip"
                                                                    data-toggle="tooltip"
                                                                    data-placement="right"
                                                                    title="Email address provided should be the insured's email address. Future email communications regarding this policy will be sent to the email submitted. For policy renewal, kindly use the email address that is tied to your existing policy.">
                                                                    ?
                                                                </div>
                                                            </span>
                                                        </label>
                                                        <input type="text" 
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-model="formData['2'].policyHolderEmail"
                                                            placeholder="E.g. you@gmail.com">
                                                        <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">* Complete the Email field.</span>
                                                            <span v-else-if="validator.failedRules.email">Please check email address</span>
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required|integer|max:11" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Mobile No.:</label>
                                                        <input type="tel"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-model="formData['2'].policyHolderMobileNo"
                                                            placeholder="E.g. 018-123 4567">
                                                        <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">* Complete the Mobile field.</span>
                                                            <span v-else-if="validator.failedRules.integer || validator.failedRules.max">Please check mobile number.</span>
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Address:</label>
                                                        <input type="text"
                                                            placeholder="First Line"
                                                            v-model="formData['2'].policyHolderAddressLine1"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }">
                                                        <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                            * Complete the Address field.
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                                <div class="form-group">
                                                    <input type="text"
                                                        placeholder="Second Line"
                                                        class="form-control"
                                                        v-model="formData['2'].policyHolderAddressLine2">
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required|min:5|max:5|integer" v-slot="validator">
                                                    <div class="form-group variant-icon variant-autocomplete">
                                                        <label class="bt1">Postcode:</label>
                                                        <vue-typeahead-bootstrap
                                                            :data="postcodeSuggestions"
                                                            v-model="formData['2'].addressPostcode"
                                                            :serializer="function (s) { return s.postcode }"
                                                            placeholder="Find postcode"
                                                            :max-matches="5"
                                                            :input-class="validator.errors.length > 0 ? 'is-invalid' : ''"
                                                            @hit="handlePostcodeHit($event)"
                                                            maxlength="5"
                                                        >
                                                            <template slot="append">
                                                                <svg class="icon icon-s mr-2">
                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-search"
                                                                        href="/spa-assets/icons/icons.svg#sprite-search"></use>
                                                                </svg>
                                                            </template>
                                                        </vue-typeahead-bootstrap>
                                                        <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Postal Code field.
                                                            </span>
                                                            <span v-else-if="validator.failedRules.min || validator.failedRules.max || validator.failedRules.integer">
                                                                Please enter a valid Postal Code.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">City:</label>
                                                    <input type="text" 
                                                        disabled="disabled"
                                                        placeholder="city"
                                                        v-model="formData['2'].addressCity"
                                                        class="form-control">
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">State:</label>
                                                    <input type="text"
                                                        disabled="disabled"
                                                        placeholder="state"
                                                        v-model="formData['2'].addressState"
                                                        class="form-control">
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Gender:</label>
                                                        <select v-model="policyHolderGender" 
                                                            :disabled="isIdNric"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }">
                                                            <option value="" disabled selected hidden>Select Option</option>
                                                            <option value="M">Male</option>
                                                            <option value="F">Female</option>
                                                        </select>
                                                        <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Gender field.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>


                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-2">Marital Status:</p>
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <select v-model="formData['2'].policyHolderMaritalStatus"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }">
                                                            <option disabled="disabled" hidden="hidden" selected="selected" value="">
                                                                Select Option
                                                            </option>
                                                            <option value="Single">Single</option>
                                                            <option value="Married">Married</option>
                                                        </select>
                                                        <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Marital Status field.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <label for="occupation" class="bt1">Occupation:</label>
                                                        <input id="occupation"
                                                            type="text"
                                                            placeholder="E.g. Architect"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-model="formData['2'].policyHolderOccupation">
                                                        <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Occupation field.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-4 wizard-navigation d-none d-md-flex">
                                        <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mr-4">Back</a>
                                        <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary">Continue</a>
                                    </div>
                                </div>

                                <div class="col-12 col-md-4">
                                    <motor-summary-pane 
                                        :curr-step-num="currStep.stepNum"
                                        :form-data="formData"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="container pt-4 wizard-navigation d-md-none">
                            <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary mb-3 mb-md-0">Continue</a>
                            <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary ">Back</a>
                        </div>
                    </fieldset>

                    <fieldset class="wizard-section-3" v-if="currStep && currStep.stepNum === '3'">
                        <div class="container">
                            <div class="row">
                                <div class="col-12 col-md-8">
                                    <div class="bg-w py-4 px-4 mb-3">
                                        <!-- Plan Selection Boxes -->
                                        <h2 class="p2 mb-4 mt-3">Please Select Your Preferred Plan</h2>
                                        <div class="selection-infobox-group row motorcycle-selection">
                                            <div class="col-12 ">
                                                <div class="d-lg-flex">

                                                    <div class="selection-infobox mb-4 mt-md-0 mb-lg-0 mr-lg-3 has-recommended">
                                                        <label class="d-block">
                                                            <strong class="flag-recommended text-center d-block py-2">
                                                                <svg class="icon">
                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-star"
                                                                        href="/spa-assets/icons/icons.svg#sprite-star"></use>
                                                                </svg>
                                                                <span>Recommended</span>
                                                            </strong>
                                                            <input @change="initializeTooltips"
                                                                type="radio" 
                                                                v-model="formData['3'].motorPlanType" 
                                                                value="comprehensive" />
                                                            <div class="box overflow-hidden">
                                                                <div class="header-match-height">
                                                                    <div class="box--header bg-p2 text-white p-3">
                                                                        <h3 class="m-0">Comprehensive Motorcycle Insurance</h3>
                                                                    </div>
                                                                    <div class="mt-4 mb-3">
                                                                        <svg class="icon icon-7xl ">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-motorcycle"
                                                                                href="/spa-assets/icons/icons.svg#sprite-motorcycle">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                                <div class="box--body px-3 pt-0 pb-3">
                                                                    <ul class="list variant-icon mb-0 ">

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center" data-row-num="1">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold ">Third party cover</span>
                                                                            </div>
                                                                        </li>

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center" data-row-num="2">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold">Accidental Fire &amp; Theft</span>
                                                                            </div>
                                                                        </li>

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center" data-row-num="3">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold ">Loss or damage to your motorcycle</span>
                                                                            </div>
                                                                        </li>
                                                                    </ul>

                                                                    <div class="text-center py-2">
                                                                        <div class="custom-rounded-checked">
                                                                            <svg class="icon icon-m tick-mark my-2">
                                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                </use>
                                                                            </svg>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </label>
                                                    </div>

                                                    <div class="selection-infobox mb-lg-0 mr-lg-3">
                                                        <label class="d-block">
                                                            <strong class="flag-recommended text-primary text-center d-block py-2 invisible">
                                                                <svg class="icon">
                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-star"
                                                                        href="/spa-assets/icons/icons.svg#sprite-star"></use>
                                                                </svg>
                                                                <span></span>
                                                            </strong>
                                                            <input @change="initializeTooltips" type="radio" v-model="formData['3'].motorPlanType" value="m3pa" />
                                                            <div class="box overflow-hidden">
                                                                <div class="header-match-height">
                                                                    <div class="box--header bg-p2 text-white p-3">
                                                                        <h3 class="m-0 py-2 mt-1">Motorcycle 3PA Insurance</h3>
                                                                    </div>
                                                                    <div class="mt-4 mb-3">
                                                                        <svg class="icon icon-7xl ">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-motorcycle-bang"
                                                                                href="/spa-assets/icons/icons.svg#sprite-motorcycle-bang">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                                <div class="box--body px-3 pt-0 pb-3">


                                                                    <ul class="list variant-icon mb-0 ">
                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center" data-row-num="1">

                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold ">Third party cover</span>
                                                                            </div>

                                                                        </li>

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center" data-row-num="2">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold">Personal accident cover for policyholder </span>
                                                                            </div>
                                                                        </li>

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center" data-row-num="3">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class='bold'>Personal accident cover for authorised riders if All Riders cover is purchased</span>
                                                                            </div>
                                                                        </li>
                                                                    </ul>

                                                                    <div class="text-center py-2">
                                                                        <div class="custom-rounded-checked">
                                                                            <svg class="icon icon-m tick-mark my-2">
                                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                </use>
                                                                            </svg>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </label>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!-- Plan Selection Boxes -->

                                        <!-- Checkboxes for add-ons -->
                                        <div class="check-list-container" v-if="formData['3'].motorPlanType === 'm3pa'">
                                            <div class="d-flex mt-5">
                                                <h2 class="p2 mb-0">Pre-Bundled Add-On</h2>
                                            </div>
                                            <div class="checkbox-list mb-5 mt-4">
                                                <div class="d-flex align-items-center">
                                                    <span>
                                                        <svg class="icon icon-s tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </span>
                                                    <p class="bt2 ml-3 mb-0 bold">Riders Personal Accident (Non-Tariff)</p>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip"
                                                            data-toggle="tooltip"
                                                            data-placement="right"
                                                            title="Get covered against death or permanent disablement resulting from a road accident whilst using the insured motorcycle. In the event of death of the policyholder or authorised rider from an accident, we will pay a bereavement allowance.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="check-list-container">
                                            <div class="d-flex mt-5 mb-4">
                                                <h2 class="p2">Choose More Optional Add-On</h2>
                                            </div> 

                                            <div class="checkbox-list" v-if="formData['3'].motorPlanType === 'comprehensive'">
                                                <div class="d-flex align-items-md-center">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            id="motorAddRiderPA"
                                                            v-model="formData['3'].motorAddRiderPA"
                                                            class="form-check-input"
                                                            @change="calculatePremiumAsync">
                                                        <label for="motorAddRiderPA" class="form-check-label bt2 pr-0">
                                                            Rider's Personal Accident (Non-Tariff)
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="right"
                                                            title="Get covered against death or permanent disablement resulting from a road accident whilst using the insured motorcycle. In the event of death of the policyholder or authorised rider from an accident, we will pay a bereavement allowance.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="checkbox-list my-4">
                                                <div class="d-flex align-items-md-center">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            id="allRiderPlan"
                                                            v-model="formData['3'].allRiderPlan"
                                                            class="form-check-input"
                                                            @change="calculatePremiumAsync">
                                                        <label for="allRiderPlan" class="form-check-label bt2 pr-0">
                                                            All Riders
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="right"
                                                            title="Get covered against accidents that happen when your motorcycle is being used by a licensed rider who has your permission to use your motorcycle.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                                
                                                <div class="ml-4 pl-2 font-italic" v-if="!formData['3'].allRiderPlan">
                                                    <small class="color-red"><b>"You are choosing Single Rider coverage"</b></small>
                                                    <br>
                                                    <small class="color-red">Important Note: There will be no coverage in the event of your motorcycle ridden by any other person.</small>
                                                </div>
                                            </div>

                                            <div class="checkbox-list my-4">
                                                <div :class="{
                                                    'd-flex align-items-md-center': true,
                                                    'disabled-check': formData['3'].motorPlanType === 'm3pa'
                                                }">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            name="riot"
                                                            id="riot"
                                                            v-model="formData['3'].motorAddSRCC"
                                                            :disabled="formData['3'].motorPlanType === 'm3pa'"
                                                            @change="calculatePremiumAsync"
                                                            class="form-check-input">
                                                        <label for="riot" class="form-check-label bt2 pr-0">
                                                            Strike, Riot and Civil Commotion
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="right"
                                                            title="Covers your motorcycle against damage caused by strike, riot and civil commotion.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="checkbox-list my-4">
                                                <div :class="{
                                                    'd-flex align-items-md-center': true,
                                                    'disabled-check': formData['3'].motorPlanType === 'm3pa'
                                                }">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            name="motorAddSpecialPerils"
                                                            id="motorAddSpecialPerils"
                                                            v-model="formData['3'].motorAddSpecialPerils"
                                                            :disabled="formData['3'].motorPlanType === 'm3pa'"
                                                            class="form-check-input"
                                                            @change="calculatePremiumAsync">
                                                        <label for="motorAddSpecialPerils" class="form-check-label bt2 pr-0">
                                                            Special Perils
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="right"
                                                            title="We cover the cost to repair your motorcycle if it gets damaged by flood, storm, landslide, landslip or other covulsion of nature.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="checkbox-list my-4">
                                                <div class="d-flex align-items-md-center">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            name="motorAddLegalLiabilityOfPassengers"
                                                            id="motorAddLegalLiabilityOfPassengers"
                                                            v-model="formData['3'].motorAddLegalLiabilityOfPassengers"
                                                            class="form-check-input"
                                                            @change="calculatePremiumAsync">
                                                        <label for="motorAddLegalLiabilityOfPassengers" class="form-check-label bt2 pr-0">
                                                            Legal Liability to Pillion
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="right"
                                                            title="Get covered against legal liability that your pillion might seek against you if you get into an accident.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Checkboxes for add-ons -->
                                    </div>

                                    <div class="pt-4 wizard-navigation d-none d-md-flex">
                                        <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mr-4">Back</a>
                                        <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary">Continue</a>
                                    </div>
                                </div>

                                <div class="col-12 col-md-4">
                                    <motor-summary-pane 
                                        :form-data="formData"
                                        :curr-step-num="currStep.stepNum"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="container pt-4 wizard-navigation d-md-none">
                            <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary mb-3 mb-md-0">Continue</a>
                            <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary ">Back</a>
                        </div>
                    </fieldset>

                    <fieldset class="wizard-section-4" v-if="currStep && currStep.stepNum === '4'">
                        <div class="container">
                            <div class="row">
                                <div class="col-12 col-md-8">
                                    <div class="bg-w py-5 pb-3 px-4 mb-4">
                                        <h2 class="p2 mb-4">Motorcycle Details</h2>
                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Motorcycle Registration No.:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['1'].motorRegistrationNo }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['1'].motorRegistrationNo" disabled>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Motorcycle Make:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].make }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].make" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Motorcycle Model:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].family }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].family" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Year of Make:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].motorYearOfMake }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].motorYearOfMake" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Variant:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].variant }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].variant" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Motorcycle Location:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].motorVehicleLocation.name }}</p>
                                                <template v-if="formData['4'].isMotorDetailsEditMode">
                                                    <validation-provider rules="required" v-slot="{ errors, failedRules }">
                                                        <div class="form-group">
                                                            <select :class="{ 'form-control': true, 'is-invalid': errors.length > 0 }" 
                                                                @change="calculatePremiumAsync"
                                                                v-model="formData['4'].motorVehicleLocation">
                                                                <option disabled hidden selected value="">Select a state</option>
                                                                <option v-for="state in states" :key="state.code" :value="state">{{ state.name }}</option>
                                                            </select>
                                                            <small class="error-message text-primary font-italic" v-if="failedRules.required">
                                                                * Complete the Motorcycle Location field.
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </template>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Sum Insured Value:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].sumInsuredType === 'marketValue' ? 'Market Value' : 'Recommended Value' }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" :value="formData['2'].sumInsuredType === 'marketValue' ? 'Market Value' : 'Recommended Value'" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Cubic Capacity:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].motorCc }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].motorCc" disabled>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="d-flex justify-content-end" v-if="!formData['4'].isMotorDetailsEditMode">
                                            <a href="#"
                                                class="btn btn-secondary btn-icon"
                                                @click.prevent="formData['4'].isMotorDetailsEditMode = !formData['4'].isMotorDetailsEditMode">
                                                <div class="button-icon">
                                                    <svg class="icon icon-s">
                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-pencil-1"
                                                            href="/spa-assets/icons/icons.svg#sprite-pencil-1"></use>
                                                    </svg>
                                                </div>
                                                <span class="button-text">Edit</span>
                                            </a>
                                        </div>
                                        <div class="d-flex justify-content-end" v-if="formData['4'].isMotorDetailsEditMode">
                                            <a href="#"
                                                class="btn btn-primary btn-icon mr-3"
                                                @click.prevent="cancelEditMotorDetails">
                                                <div class="button-icon">
                                                    <svg class="icon icon-s">
                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-close"
                                                            href="/spa-assets/icons/icons.svg#sprite-close"></use>
                                                    </svg>
                                                </div>
                                                <span class="button-text">Cancel</span>
                                            </a>
                                            <a href="#"
                                                class="btn btn-secondary"
                                                @click.prevent="saveEditMotorDetails">
                                                <span class="button-text">Save</span>
                                            </a>
                                        </div>
                                    </div>

                                    <!-- #region Rider Details -->
                                    <div class="bg-w py-5 pb-3 px-4 mb-4">
                                        <h2 class="p2 mb-4">Rider Details</h2>
                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Name (as per NRIC):</p>
                                                <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['2'].policyHolderName }}</p>
                                                <template v-if="formData['4'].isRiderDetailsEditMode">
                                                    <validation-provider rules="required|validName" v-slot="validator">
                                                        <div class="form-group">
                                                            <input type="text"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }"
                                                                v-model="formData['4'].policyHolderName"
                                                                placeholder="E.g. Lee Siew Suan">
                                                            <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">* Complete the Name as per NRIC field.</span>
                                                                <span v-else-if="validator.failedRules.validName">Please enter only alphabet, "-", "@", "/" and " ' " for Name</span>
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </template>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">NRIC No.:</p>
                                                <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['1'].policyHolderNric }}</p>
                                                <div class="form-group" v-if="formData['4'].isRiderDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['1'].policyHolderNric" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Email:</p>
                                                <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['2'].policyHolderEmail }}</p>
                                                <template v-if="formData['4'].isRiderDetailsEditMode">
                                                    <validation-provider rules="required|email" v-slot="validator">
                                                        <div class="form-group">
                                                            <input type="text" 
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }"
                                                                v-model="formData['4'].policyHolderEmail"
                                                                placeholder="E.g. 900808-10-8888">
                                                            <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">* Complete the Email field.</span>
                                                                <span v-else-if="validator.failedRules.email">Please check email address</span>
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </template>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Mobile No.:</p>
                                                <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['4'].policyHolderMobileNo }}</p>
                                                <template v-if="formData['4'].isRiderDetailsEditMode">
                                                    <validation-provider rules="required|integer|max:11" v-slot="validator">
                                                        <div class="form-group">
                                                            <input type="tel"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }"
                                                                v-model="formData['4'].policyHolderMobileNo"
                                                                placeholder="E.g. 018-123 4567">
                                                            <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">* Complete the Mobile field.</span>
                                                                <span v-else-if="validator.failedRules.integer || validator.failedRules.max">Please check mobile number.</span>
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </template>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Address:</p>
                                                <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ fullAddress }}</p>
                                                <template v-if="formData['4'].isRiderDetailsEditMode">
                                                    <!-- Address Line 1 -->
                                                    <validation-provider rules="required" v-slot="validator">
                                                        <div class="form-group">
                                                            <input type="text"
                                                                placeholder="First Line"
                                                                v-model="formData['4'].policyHolderAddressLine1"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }">
                                                            <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                                * Complete the Address field.
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                    
                                                    <!-- Address Line 2 -->
                                                    <div class="form-group">
                                                        <input type="text"
                                                            placeholder="Second Line"
                                                            class="form-control"
                                                            v-model="formData['4'].policyHolderAddressLine2">
                                                    </div>

                                                    <!-- Postcode -->
                                                    <validation-provider rules="required|min:5|max:5|integer" v-slot="validator">
                                                        <div class="form-group variant-icon variant-autocomplete">
                                                            <label class="bt1">Postcode:</label>
                                                            <vue-typeahead-bootstrap
                                                                :data="postcodeSuggestions"
                                                                v-model="formData['2'].addressPostcode"
                                                                :serializer="function(s) { return s.postcode }"
                                                                placeholder="Find postcode"
                                                                :max-matches="5"
                                                                :input-class="validator.errors.length > 0 ? 'is-invalid' : ''"
                                                                @hit="handlePostcodeHit($event)"
                                                                maxlength="5"
                                                            >
                                                                <template slot="append">
                                                                    <svg class="icon icon-s mr-2">
                                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-search"
                                                                            href="/spa-assets/icons/icons.svg#sprite-search"></use>
                                                                    </svg>
                                                                </template>
                                                            </vue-typeahead-bootstrap>
                                                            <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">
                                                                    * Complete the Postal Code field.
                                                                </span>
                                                                <span v-else-if="validator.failedRules.min || validator.failedRules.max || validator.failedRules.integer">
                                                                    Please enter a valid Postal Code.
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </validation-provider>
                                                    <div class="form-group">
                                                        <label class="bt1">City:</label>
                                                        <input type="text" 
                                                            disabled="disabled"
                                                            placeholder="city"
                                                            v-model="formData['2'].addressCity"
                                                            class="form-control">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="bt1">State:</label>
                                                        <input type="text"
                                                            disabled="disabled"
                                                            placeholder="state"
                                                            v-model="formData['2'].addressState"
                                                            class="form-control">
                                                    </div>
                                                </template>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Gender:</p>
                                                <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ policyHolderGender === 'M' ? 'Male' : 'Female' }}</p>
                                                <template v-if="formData['4'].isRiderDetailsEditMode">
                                                    <validation-provider rules="required" v-slot="validator">
                                                        <div class="form-group">
                                                            <select v-model="policyHolderGender" 
                                                                :disabled="isIdNric"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }">
                                                                <option value="" disabled selected hidden>Select Option</option>
                                                                <option value="M">Male</option>
                                                                <option value="F">Female</option>
                                                            </select>
                                                            <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">
                                                                    * Complete the Gender field.
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </validation-provider>
                                                    
                                                </template>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Marital Status:</p>
                                                <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['4'].policyHolderMaritalStatus }}</p>
                                                <template v-if="formData['4'].isRiderDetailsEditMode">
                                                    <validation-provider rules="required" v-slot="validator">
                                                        <div class="form-group">
                                                            <select v-model="formData['4'].policyHolderMaritalStatus"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }">
                                                                <option disabled="disabled" hidden="hidden" selected="selected" value="">
                                                                    Select Option
                                                                </option>
                                                                <option value="Single">Single</option>
                                                                <option value="Married">Married</option>
                                                            </select>
                                                            <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">
                                                                    * Complete the Marital Status field.
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </validation-provider>
                                                </template>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Occupation:</p>
                                                <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['4'].policyHolderOccupation }}</p>
                                                <template v-if="formData['4'].isRiderDetailsEditMode">
                                                    <validation-provider rules="required" v-slot="validator">
                                                        <div class="form-group">
                                                            <input id="occupation"
                                                                type="text"
                                                                placeholder="E.g. Architect"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }"
                                                                v-model="formData['4'].policyHolderOccupation">
                                                            <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">
                                                                    * Complete the Occupation field.
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </validation-provider>
                                                </template>
                                            </div>
                                        </div>

                                        <div class="d-flex justify-content-end" v-if="!formData['4'].isRiderDetailsEditMode">
                                            <a href="#" @click.prevent="formData['4'].isRiderDetailsEditMode = true" class="btn btn-secondary btn-icon">
                                                <div class="button-icon">
                                                    <svg class="icon icon-s">
                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-pencil-1"
                                                            href="/spa-assets/icons/icons.svg#sprite-pencil-1"></use>
                                                    </svg>
                                                </div>
                                                <span class="button-text">Edit</span>
                                            </a>
                                        </div>
                                        <div class="d-flex justify-content-end" v-if="formData['4'].isRiderDetailsEditMode">
                                            <a href="#"
                                                class="btn btn-primary btn-icon mr-3"
                                                @click.prevent="cancelEditRiderDetails">
                                                <div class="button-icon">
                                                    <svg class="icon icon-s">
                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-close"
                                                            href="/spa-assets/icons/icons.svg#sprite-close"></use>
                                                    </svg>
                                                </div>
                                                <span class="button-text">Cancel</span>
                                            </a>
                                            <a href="#"
                                                class="btn btn-secondary"
                                                @click.prevent="saveEditRiderDetails">
                                                <span class="button-text">Save</span>
                                            </a>
                                        </div>
                                    </div>
                                    <!-- #endregion Rider Details -->

                                    <validation-provider v-slot="validator" rules="mustBeTrue">
                                        <div class="form-check d-none d-md-block">
                                            <input type="checkbox"
                                                name="tncAgreement"
                                                id="tncAgreement"
                                                required
                                                :class="{
                                                    'form-check-input': true,
                                                    'is-invalid': validator.errors.length > 0
                                                }"
                                                v-model="formData['4'].tncAgreement">
                                            <label for="tncAgreement" class="form-check-label pr-md-5">
                                                By ticking this box, I hereby acknowledge that I have read the <a class="underline" href="/msigonline/resource/MSIG%20Motorcycle%20Insurance%20PDS%20(Rebate).pdf">Product Disclosure Sheet</a> and agree to the <a href="#" class="underline">Terms and Conditions</a>.
                                            </label>
                                            <svg class="icon icon-m tick-mark">
                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                            </svg>
                                            <div class="invalid-feedback font-italic" v-if="validator.errors.length > 0">
                                                * Oops, looks like you haven't ticked the box yet. Please do so to proceed
                                            </div>
                                        </div>
                                    </validation-provider>

                                    <div class="pt-4 wizard-navigation d-none d-md-flex">
                                        <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mr-4">Back</a>
                                        <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary">Checkout</a>
                                    </div>
                                </div>
                                <div class="col-12 col-md-4">
                                    <motor-summary-pane 
                                        :form-data="formData"
                                        :curr-step-num="currStep.stepNum"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="container">
                            <validation-provider v-slot="validator" rules="mustBeTrue">
                                <div class="form-check d-md-none mt-3">
                                    <input type="checkbox" 
                                        name="m_tncAgreement" 
                                        id="m_tncAgreement" 
                                        :class="{
                                            'form-check-input': true,
                                            'is-invalid': validator.errors.length > 0
                                        }"
                                        v-model="formData['4'].tncAgreement">
                                    <label for="m_tncAgreement" class="form-check-label pr-md-5">
                                        By ticking this box, I hereby acknowledge that I have read the <a class="underline" href="/msigonline/resource/MSIG%20Motorcycle%20Insurance%20PDS%20(Rebate).pdf">Product Disclosure Sheet</a> and agree to the <a href="#" class="underline">Terms and Conditions</a>.
                                    </label>
                                    <svg class="icon icon-m tick-mark">
                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                            href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                    </svg>
                                    <div class="invalid-feedback font-italic" v-if="validator.errors.length > 0">
                                        * Oops, looks like you haven't ticked the box yet. Please do so to proceed
                                    </div>
                                </div>
                            </validation-provider>
                        </div>
                        <div class="container pt-4 wizard-navigation d-md-none">
                            <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary mb-3 mb-md-0">Checkout</a>
                            <a @click.prevent="goToPrevStep()" role="button" class="btn btn-default btn-outline-primary ">Back</a>
                        </div>
                    </fieldset>

                    <fieldset class="wizard-section-5" v-if="currStep && currStep.stepNum === '5'">
                        <div class="container">
                            <div class="row">
                                <div class="col-12 col-md-8">
                                    <div class="bg-w py-5 px-4 mb-3">
                                        <h2 class="p2 mb-4">Payment</h2>

                                        <p class="bt1 color-black font-weight-bold mb-0">Payment Method:</p>
                                        <div class="vertical-scroller mb-3">
                                            <div class="d-flex">
                                                <!-- card one -->
                                                <div class="selection-infobox mb-3 mb-lg-0 mr-3">
                                                    <label class="d-block">
                                                        <strong
                                                            class="flag-recommended text-primary text-center d-block mb-2 invisible">
                                                            <svg class="icon">
                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-star"
                                                                    href="/spa-assets/icons/icons.svg#sprite-star"></use>
                                                            </svg>
                                                            <span></span>
                                                        </strong>
                                                        <input type="radio" 
                                                            name="choosePayment" 
                                                            value="fpxPaymentGateway"
                                                            v-model="formData['5'].paymentMethod" />
                                                        <div class="box overflow-hidden">
                                                            <div class="header-match-height">
                                                                <div class="box--header bg-p2 text-white p-3">
                                                                    <h3 class="m-0">Online Banking</h3>
                                                                </div>
                                                                <div class="mt-4 mb-3">
                                                                    <svg class="icon icon-4xl">
                                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-fpx"
                                                                            href="/spa-assets/icons/icons.svg#sprite-fpx">
                                                                        </use>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                            <div class="box--body px-3 pt-0 pb-3">
                                                                <div class="text-center py-2">
                                                                    <div class="custom-rounded-checked">
                                                                        <svg class="icon icon-m tick-mark my-2">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </label>
                                                </div>

                                                <!-- card two -->
                                                <div class="selection-infobox mb-3 mb-lg-0 mr-3">
                                                    <label class="d-block">
                                                        <strong
                                                            class="flag-recommended text-primary text-center d-block mb-2 invisible">
                                                            <svg class="icon">
                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-star"
                                                                    href="/spa-assets/icons/icons.svg#sprite-star"></use>
                                                            </svg>
                                                            <span></span>
                                                        </strong>
                                                        <input type="radio"
                                                            name="choosePayment"
                                                            value="abmbGateway"
                                                            @change="initializeTooltips"
                                                            v-model="formData['5'].paymentMethod" />
                                                        <div class="box overflow-hidden">
                                                            <div class="header-match-height">
                                                                <div class="box--header bg-p2 text-white p-3">
                                                                    <h3 class="m-0">Credit/Debit Card</h3>
                                                                </div>
                                                                <div class="mt-4 mb-3">
                                                                    <svg class="icon icon-4xl">
                                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-credit-card"
                                                                            href="/spa-assets/icons/icons.svg#sprite-credit-card">
                                                                        </use>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                            <div class="box--body px-3 pt-0 pb-3">
                                                                <div class="text-center py-2">
                                                                    <div class="custom-rounded-checked">
                                                                        <svg class="icon icon-m tick-mark my-2">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </label>
                                                </div>

                                                <!-- card 3 -->
                                                <div class="selection-infobox mb-3 mb-lg-0 mr-3">
                                                    <label class="d-block">
                                                        <strong class="flag-recommended text-primary text-center d-block mb-2 invisible">
                                                            <svg class="icon">
                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-star"
                                                                    href="/spa-assets/icons/icons.svg#sprite-star"></use>
                                                            </svg>
                                                            <span></span>
                                                        </strong>
                                                        <input type="radio"
                                                            name="choosePayment"
                                                            value="ewalletPaymentMethod"
                                                            v-model="formData['5'].paymentMethod" />
                                                        <div class="box overflow-hidden">
                                                            <div class="header-match-height">
                                                                <div class="box--header bg-p2 text-white p-3">
                                                                    <h3 class="m-0">E-Wallet</h3>
                                                                </div>
                                                                <div class="mt-4 mb-3">
                                                                    <svg class="icon icon-4xl">
                                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-ewallets"
                                                                            href="/spa-assets/icons/icons.svg#sprite-ewallets">
                                                                        </use>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                            <div class="box--body px-3 pt-0 pb-3">
                                                                <div class="text-center py-2">
                                                                    <div class="custom-rounded-checked">
                                                                        <svg class="icon icon-m tick-mark my-2">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- FPX Banking -->
                                        <div v-show="formData['5'].paymentMethod === 'fpxPaymentGateway'">
                                            <p class="bt1 mb-2">Bank:</p>
                                            <validation-provider :rules="formData['5'].paymentMethod === 'fpxPaymentGateway' ? 'required' : ''"
                                                v-slot="validator">
                                                <div class="form-group">
                                                    <select v-model="formData['5'].bankId"
                                                        :class="{
                                                            'form-control': true,
                                                            'is-invalid': validator.errors.length > 0
                                                        }">
                                                        <option disabled hidden selected value="">Select a Bank</option>
                                                        <option v-for="(bank, index) in banks" v-bind:key="index"
                                                            :value="bank.bankId">
                                                            {{ bank.bankName }}
                                                        </option>
                                                    </select>
                                                    <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                        Please select a valid bank
                                                    </small>
                                                </div>
                                            </validation-provider>

                                            <p><small>Note: You need to have an active internet banking account with any of the FPX performing banks to use FPX.</small></p>

                                            <p class="bt1 mb-2">
                                                Email Address: <small class="font-italic">(For transaction status)</small>
                                            </p>

                                            <div class="row">
                                                <div class="col-12 col-md-6">
                                                    <validation-provider :rules="formData['5'].paymentMethod === 'fpxPaymentGateway' ? 'required|email' : ''"
                                                        v-slot="validator">
                                                        <div class="form-group">
                                                            <input type="email" 
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }"
                                                                placeholder="e.g. hteoro@gmail.com"
                                                                v-model="formData['5'].fpxEmail">
                                                            <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">* Complete the Email field.</span>
                                                                <span v-else-if="validator.failedRules.email">Please check email address</span>
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- card/debit card -->
                                        <div v-show="formData['5'].paymentMethod === 'abmbGateway'">
                                            <div class="credit-card-indicator d-flex align-items-center mb-3"
                                                :class="{
                                                    'has-card': cardType
                                                }">
                                                <svg class="icon icon-3xl mr-2"
                                                    :class="{
                                                        'active': cardType === 'VISA'
                                                    }">
                                                    <use href="/spa-assets/icons/icons.svg#sprite-visa"></use>
                                                </svg>
                                                <svg class="icon icon-xxl"
                                                    :class="{
                                                        'active': cardType === 'MASTER'
                                                    }">
                                                    <use href="/spa-assets/icons/icons.svg#sprite-mastercard"></use>
                                                </svg>
                                            </div>

                                            <div class="row">
                                                <div class="col-12 col-md-7">
                                                    <validation-provider 
                                                        :rules="formData['5'].paymentMethod === 'abmbGateway' ? 'required' : ''" 
                                                        v-slot="validator">
                                                        <div class="form-group">
                                                            <label class="bt1">Card Number:</label>
                                                            <input type="text"
                                                                placeholder="xxxx xxxx xxxx xxxx"
                                                                v-mask="'#### #### #### ####'"
                                                                name="cardnumber"
                                                                v-model="formData['5'].ccNo"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }"
                                                                autocomplete="cc-number">
                                                            <div class="small error-message text-primary font-italic">
                                                                <span v-if="validator.failedRules.required">* Complete the Card Number field.</span>
                                                                <span v-else-if="validator.failedRules.isCreditCardValid">* Please enter a valid Visa / MasterCard No</span>
                                                            </div>
                                                        </div>
                                                    </validation-provider>
                                                </div>
                                                <div class="col-12 col-md-7">
                                                    <validation-provider :rules="formData['5'].paymentMethod === 'abmbGateway' ? 'required' : ''" v-slot="validator">
                                                        <div class="form-group">
                                                            <label class="bt1">Name on Card:</label>
                                                            <input type="text"
                                                                placeholder="Name on Card"
                                                                v-model="formData['5'].cardHolderName"
                                                                name="ccname"
                                                                autocomplete="cc-name"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }">
                                                            <small v-if="validator.failedRules.required" class="error-message text-primary font-italic">
                                                                <span>* Please enter a valid Visa / MasterCard No.</span>
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </div>

                                                <div class="col-12 col-md-10">
                                                    <div class="form-row">
                                                        <validation-provider :rules="formData['5'].paymentMethod === 'abmbGateway' ? 'required|isCreditCardExpiryValid' : ''" v-slot="validator" slim>
                                                            <div class="col-3 form-group">
                                                                <label class="bt1">Expiration Date:</label>
                                                                <input type="text" 
                                                                    placeholder="MM/YY"
                                                                    name="expirationDate"
                                                                    name="cc-exp"
                                                                    autocomplete="cc-exp"
                                                                    v-mask="'##/##'"
                                                                    v-model="formData['5'].expiry"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }">
                                                                <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">* Complete the Expiry (MM/YY) field.</span>
                                                                    <span v-if="validator.failedRules.isCreditCardExpiryValid">* Please enter a valid Expiry date (MM/YY).</span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                        <validation-provider
                                                            :rules="formData['5'].paymentMethod === 'abmbGateway' ? 'required|integer|length:3' : ''"
                                                            v-slot="validator" slim>
                                                            <div class="form-group col-1">
                                                                <label class="bt1">CVV
                                                                    <span class="d-inline-flex">
                                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                                            data-placement="right"
                                                                            title="The last 3 digits behind your credit card">
                                                                            ?
                                                                        </div>
                                                                    </span>
                                                                </label>
                                                                <input type="text"
                                                                    placeholder="xxx"
                                                                    maxlength="3"
                                                                    name="cvc"
                                                                    style="width:110px;"
                                                                    autocomplete="cc-csc"
                                                                    v-model="formData['5'].cvv"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }">
                                                                <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">* Complete the CVV field.</span>
                                                                    <span v-else-if="validator.failedRules.length || validator.failedRules.integer">* Please enter a valid CVV</span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>

                                        <!-- E-Wallet -->
                                        <div v-show="formData['5'].paymentMethod === 'ewalletPaymentMethod'">
                                            <p class="bt1">Select Your Preferred E-Wallet:</p>
                                            <validation-provider
                                                :rules="formData['5'].paymentMethod === 'ewalletPaymentMethod' ? 'required' : ''"
                                                v-slot="validator"
                                                slim>
                                                <div>
                                                    <div class="list variant-bank">
                                                        <div class="list-item">
                                                            <input 
                                                                type="radio"
                                                                name="ewalletVendor" 
                                                                id="radEWallet1"
                                                                value="boostPaymentGateway"
                                                                v-model="formData['5'].ewalletVendor"
                                                                :class="validator.errors.length > 0 ? 'is-invalid' : ''">
                                                            <label for="radEWallet1">
                                                                <div class="bank-logo">
                                                                    <img src="/spa-assets/img/boost.png" alt="Boost logo">
                                                                </div>
                                                                <div class="bank-name">
                                                                    Boost
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="error-message small text-primary" v-if="validator.failedRules.required">
                                                        * Please select an e-Wallet Provider
                                                    </div>
                                                </div>
                                            </validation-provider>
                                        </div>
                                    </div>

                                    <div class="d-none d-md-block" v-if="formData['5'].paymentMethod === 'fpxPaymentGateway'">
                                        <p class="bt2">By clicking <strong>"Pay Now"</strong> button, you agree to FPX's
                                            <a href="#" target="_blank" class="underline">Terms & Conditions</a>.
                                        </p>
                                    </div>
                                    
                                    <div class="wizard-navigation d-none d-md-flex pt-4">
                                        <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mr-4">Back</a>
                                        <button @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" role="button" class="btn btn-default btn-primary">Pay Now</button>
                                    </div>
                                </div>

                                <div class="col-12 col-md-4">
                                    <motor-summary-pane 
                                        :form-data="formData"
                                        :curr-step-num="currStep.stepNum"
                                    />
                                </div>

                                <div class="container pt-4 wizard-navigation d-md-none">
                                    <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mb-3">Back</a>
                                    <button @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" role="button" class="btn btn-default btn-primary">Pay Now</button>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </validation-observer>

            <div class="page-loader">
                <div class="spinner-container">
                    <div class="spinner-border text-secondary" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error message section -->
        <div class="error-container py-5 bg-p2d" v-if="!canProceed">
            <div class="container">
                <div class="bg-w py-5 px-3 px-md-5">
                    <div class="text-center">
                        <img src="/spa-assets/img/prescreen-error-icon.png" alt="Error" class="img-responsive mb-3">
                        <h3>Sorry, we are unable to proceed with your request online.</h3>
                    </div>
                    <div class="bt2 text-center" v-html="errorMessage"></div>
                    <p class="bt2 text-center">For any further enquiries, please email us at <a href="mailto:msig_online@my.msig-asia.com">msig_online@my.msig-asia.com</a>.</p>
                </div>
            </div>
        </div>
        <!-- Error message section -->

        <!-- The error form returned from processPurchase will be placed here -->
        <div id="error-form-placeholder"></div>

        <form action="/dotCMS/purchase/paynow" id="thePaymentForm" name="paymentForm" method="post" novalidate class="d-none">
            <input name="partnerCode" type="hidden" v-model="partnerCode">
            <input name="productCode" type="hidden" v-model="productCode">
            <input name="productName" type="hidden" v-model="productName">
            <input name="purchaseId" type="hidden" v-model="formData['4'].purchaseTempId">
            <input name="formula" type="hidden" v-model="formula">
            <input name="paymentMethod" type="hidden" v-model="formData['5'].paymentMethod">
            <input name="ccNo" type="hidden" v-model="formData['5'].ccNo">
            <input name="cardHolderName" type="hidden" v-model="formData['5'].cardHolderName">
            <input name="expiry" type="hidden" v-model="formData['5'].expiry">
            <input name="cvv" type="hidden" v-model="formData['5'].cvv">
            <input name="wallet" type="hidden" v-model="formData['5'].ewalletVendor">
            <input name="bankId" type="hidden" v-model="formData['5'].bankId">
            <input name="fpxEmail" type="hidden" v-model="formData['5'].fpxEmail">
        </form>

        <div id="session-modal" class="modal fade variant-msig" aria-hidden="true">
            <div class="modal-dialog partial-screen-modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-t2">
                        <h6 class="w text-center modal-title">Information</h6>
                        <button class="modal-header-btn button-icon btn-close" data-dismiss="modal" @click="wishToRestoreSession = false">
                            <svg class="icon icon-s">
                                <use xlink:href="spa-assets/icons/icons.svg#sprite-close-popup" href="spa-assets/icons/icons.svg#sprite-close-popup"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="modal-container padding-top-3xl padding-bottom-l">
                        <div class="px-3 py-5 content-container">
                            <p class="bt1 text-center">Would you like to restore your previous session?</p>
                            <div class="d-flex flex-column flex-md-row align-items-center justify-content-md-center">
                                <button class="btn btn-primary mr-3" data-dismiss="modal" @click="wishToRestoreSession = true">Yes</button>
                                <button class="btn btn-secondary" data-dismiss="modal" @click="wishToRestoreSession = false">No</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script type="text/x-template" id="summary-pane-template">
        <div class="summary-pane sticky-top">
        <div class="section-header bg-p2 py-4 px-4">
            <h2 class="w mb-0">{{ currStepNum === '5' ? 'Order ' : '' }}Summary</h2>
        </div>
        <div class="bg-w py-3 px-2">
            <div class="px-3 pt-2" v-if="currStepNum !== '5'">
                <p class="bt1" v-if="formData['2'].nxtNCDDiscount > 0">
                    Youre qualified for {{ formData['2'].nxtNCDDiscount }}% NCD!
                </p>
                <p class="bt2 mb-1 font-weight-bold">Coverage</p>
                <table>
                    <tr>
                        <td width="110px">Date <span class="float-right pr-1"> : </span></td>
                        <td>{{ formData['2'].nxtNCDEffDt }} - {{ formData['2'].nxtNCDExpDt }}</td>
                    </tr>
                    <tr>
                        <td>Period <span class="float-right pr-1"> : </span></td>
                        <td>1 Year </td>
                    </tr>
                    <template v-if="currStepNum > 2 && formData['3'].motorPlanType === 'comprehensive'">
                        <tr>
                            <td>Sum Insured <span class="float-right pr-1"> : </span></td>
                            <td>RM {{ formatAsCurrency(formData['2'].marketValue) }}</td>
                        </tr>
                        <tr>
                            <td>Excess <span class="float-right pr-1"> : </span></td>
                            <td>RM 
                                {{ 
                                    formData['2'].excess > 0 ? 
                                    formatAsCurrency(formData['2'].excess) :
                                    'Nil'
                                }}
                            </td>
                        </tr>
                    </template>
                </table>
                <template v-if="currStepNum > 2">
                    <hr />
                    <p class="text-right bt1 mb-1">RM</p>
                </template>
            </div>

            <template v-if="currStepNum > 2">
                <div class="bg-p2c px-3 py-4 mb-4 rounded" v-if="currStepNum !== '5'">
                    <div class="d-flex justify-content-between">
                        <p class="bt2 mb-0">Basic Premium</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].basePremium) }}</p>
                    </div>
                    <div class="d-flex justify-content-between" v-if="formData['3'].loading && formData['3'].loading > 0">
                        <p class="bt2 mb-0">Loading ({{ formData['3'].loadingPct }}%)</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].loading) }}</p>
                    </div>
                    <div class="d-flex justify-content-between" v-if="formData['3'].allRiderPlanPremium">
                        <p class="bt2 mb-0">All Riders</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].allRiderPlanPremium) }}</p>
                    </div>
                    <div class="d-flex justify-content-between">
                        <p class="bt2 mb-0">NCD ({{ formData['3'].ncdRate }}%)</p>
                        <p class="bt2 mb-0">({{ formatAsCurrency(formData['3'].ncdAmount) }})</p>
                    </div>
                    <div class="d-flex justify-content-between">
                        <p class="bt2 mb-0 font-weight-bold">Total Amount</p>
                        <p class="bt2 mb-0 font-weight-bold">{{ formatAsCurrency(netNCDAmount) }}</p>
                    </div>
                </div>

                <div class="px-3" v-if="(isAnySpecialAddOnSelected || formData['3'].motorPlusPlan === '') && currStepNum !== '5'">
                    <div class=" d-flex justify-content-between mb-2">
                        <p class="bt2 mb-0 font-weight-bold">Add-Ons</p>
                    </div>
                    <div class="d-flex justify-content-between mb-2" v-if="formData['3'].addRiderPAPremium">
                        <p class="bt2 mb-0 pr-3">Rider's Personal Accident (Non-Tariff)</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].addRiderPAPremium) }}</p>
                    </div>
                    <div class="d-flex justify-content-between mb-2" v-if="formData['3'].addSRCCPremium">
                        <p class="bt2 mb-0 pr-3">Strike, Riot and Civil Commotion</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].addSRCCPremium) }}</p>
                    </div>
                    <div class="d-flex justify-content-between mb-2" v-if="formData['3'].addSpecialPerilsPremium">
                        <p class="bt2 mb-0 pr-3">Special Perils</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].addSpecialPerilsPremium) }}</p>
                    </div>
                    <div class="d-flex justify-content-between mb-2" v-if="formData['3'].motorAddLegalLiabilityOfPassengers">
                        <p class="bt2 mb-0 pr-3">Legal Liability To Pillion</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].addLegalLiabilityOfPassengersPremium) }}</p>
                    </div>
                    <hr />
                    <div class="d-flex justify-content-between pb-4">
                        <p class="bt2 mb-0 pr-3"><strong>Total Add-Ons</strong></p>
                        <p class="bt2 mb-0"><strong>{{ formatAsCurrency(formData['3'].totalAdditionalCoveragePremium) }}</strong></p>
                    </div>
                </div>

                <p class="text-right bt1 mb-1 px-3" v-if="currStepNum === '5'">RM</p>
                <div class="bg-p2c px-3 py-4 rounded">
                    <div class="d-flex justify-content-between">
                        <p class="bt2 mb-0">Gross Premium</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(grossPremium) }}</p>
                    </div>
                    <div class="d-flex justify-content-between ">
                        <p class="bt2 mb-0">Rebate ({{ formData['3'].discountRate }}%)</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].discountAmount) }}</p>
                    </div>

                    <div class="divider my-4"></div>
                    <div class="d-flex justify-content-between">
                        <p class="bt2 mb-0">
                            <strong>Subtotal</strong>
                        </p>
                        <p class="bt2 mb-0">
                            <strong>{{ formatAsCurrency(formData['3'].totalPremium) }}</strong>
                        </p>
                    </div>
                    <div class="d-flex justify-content-between">
                        <p class="bt2 mb-0">Service Tax ({{ formData['3'].sst }}%)</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].sstAmount) }}</p>
                    </div>
                    <div class="d-flex justify-content-between">
                        <p class="bt2 mb-0">Stamp Duty</p>
                        <p class="bt2 mb-0">{{ formatAsCurrency(formData['3'].stampDuty) }}</p>
                    </div>
                </div>

            </template>
        </div>
        <div class="section-header bg-p2 py-4 px-4 d-flex justify-content-between align-items-center" v-if="currStepNum > 2">
            <p class="bt1 w mb-0"><strong>Total Amount Payable</strong></p>
            <p class="h2 w mb-0">{{ formatAsCurrency(formData['3'].totalPayable) }}</p>
        </div>
    </div>
    </script>

    <div id="information-modal" class="modal fade variant-msig">
        <div class="modal-dialog partial-screen-modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-t2">
                    <h6 class="w text-center modal-title">Information</h6>
                    <button class="modal-header-btn button-icon btn-close" data-dismiss="modal">
                        <svg class="icon icon-s">
                            <use xlink:href="spa-assets/icons/icons.svg#sprite-close-popup"
                                href="spa-assets/icons/icons.svg#sprite-close-popup"></use>
                        </svg>
                    </button>
                </div>
                <div class="modal-container padding-top-3xl padding-bottom-l">
                    
            <div class="px-3 py-5 content-container"></div>
        
                </div>
            </div>
        </div>
    </div>


</main>




<link href="/css/main-m3pa.css" rel="stylesheet">
<script btype="text/javascript" src="/js/main-m3pa.js"></script>
]]#